<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="王不二的書架" href="https://wongbuer.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="王不二的書架" href="https://wongbuer.github.io/atom.xml"><link rel="alternate" type="application/json" title="王不二的書架" href="https://wongbuer.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://wongbuer.github.io/%E5%B5%8C%E5%85%A5%E5%BC%8F/IIC%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE/"><title>IIC 通讯协议 - 嵌入式 | Wongbuer's Shoka = 王不二的書架 = 自是桃李树，何畏不成蹊。</title><meta name="generator" content="Hexo 7.1.1"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">IIC 通讯协议</h1><div class="meta"><span class="item" title="创建时间：2022-05-23 12:30:04"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-05-23T12:30:04+08:00">2022-05-23</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>5.3k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Wongbuer's Shoka</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/assets/4.webp"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/embedded/" itemprop="item" rel="index" title="分类于 嵌入式"><span itemprop="name">嵌入式</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://wongbuer.github.io/%E5%B5%8C%E5%85%A5%E5%BC%8F/IIC%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="王不二"><meta itemprop="description" content="自是桃李树，何畏不成蹊。, 王不二的网络博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="王不二的書架"></span><div class="body md" itemprop="articleBody"><h1 id="iic通讯协议"><a class="anchor" href="#iic通讯协议">#</a> IIC 通讯协议</h1><h2 id="简介"><a class="anchor" href="#简介">#</a> 简介</h2><p>IIC 通讯主要依靠两线 : SDA (数据) 和 SCL (时钟) 分别对应管脚 P20 和 P21</p><p>使用 IIC 可以实现主机和多个从机之间的通讯 每个从机拥有唯一的地址 (地址一共八位 前七位唯一确定从机 最后一位确定主机与从机之间谁发送谁读取数据)</p><p>我看到过这样的问题 要是正好有多个从机被设置成了同一个地址 是不是就可以实现一个主机和多个从机之间的同时通讯 (答案是不能 从机之间会互相争抢与主机之间的通讯机会)</p><p>主机和从机建立联系的方式是：主机在 SDA 上发送从机的地址 所有从机收到该地址后与自己的地址进行比对 如果相一致便与主机建立联系</p><p><img data-src="https://cdn.jsdelivr.net/gh/Wongbuer/typora/static/20210305172731.png" alt="1124009-20170331094740789-36160489"></p><center>之前提到过的“线与”关系</center><h2 id="iic传输规则"><a class="anchor" href="#iic传输规则">#</a> IIC 传输规则</h2><p>自己回忆的 可能有偏差</p><ol><li>数据传输开始和结束必须由规定的方式</li><li>每传输完一字节的数据后 接收端如果发送应答信号 表示继续接收数据 未应答表示不再接收数据</li><li>传输数据过程中 SCL 置于高电平的时候 SDA 保持稳定 (不能改变) SCL 置于低电平的时候 SDA 可以改变</li><li>传输每一位数据都必须达到规定的时间以上</li></ol><p>以上就是我暂时能回忆起来的 IIC 规则 想起来再添加 (不过好像也只有这些)</p><h2 id="开始信号"><a class="anchor" href="#开始信号">#</a> 开始信号</h2><p>IIC 开始信号：当 SCL 处于高电平 (1) 时 (时长大于 4.7us) SDA 由高电平变为低电平 并保持至少 4us 则将其视为开始信号</p><img data-src="https://cdn.jsdelivr.net/gh/Wongbuer/typora/static/20210305174226.png" alt="微信截图_20210305174149" style="zoom:67%"><p>原来在这里还有一个疑问：之前说的当 SCL 处于 1 时 SDA 不能变化 那么这里又怎么又可以变为 0 呢</p><p>那个规则在传输过程中使用 这种特殊情况便于区分开始和结束这种特殊信号</p><h3 id="代码如下"><a class="anchor" href="#代码如下">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">iicStart</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    SDA = <span class="number">1</span>;</span><br><span class="line">    delay();</span><br><span class="line">    SCL = <span class="number">1</span>;</span><br><span class="line">    delay();</span><br><span class="line">    SDA = <span class="number">0</span>;</span><br><span class="line">    delay();</span><br><span class="line">    SCl = <span class="number">0</span>;</span><br><span class="line">    delay();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="发送数据"><a class="anchor" href="#发送数据">#</a> 发送数据</h2><p>IIC 只能一位一位的发送数据 所以如果我们要发一个字节的数据 就要循环 8 次</p><h3 id="代码如下-2"><a class="anchor" href="#代码如下-2">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">iicSendData</span><span class="params">(<span class="type">char</span> dat)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i,index = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        SDA = dat &gt;&gt; <span class="number">7</span>;			<span class="comment">//因为之前已经将SCL置零 所以可以直接更改SDA的值</span></span><br><span class="line">        dat &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        SCL = <span class="number">1</span>;				<span class="comment">//让SDA的值稳定下来 </span></span><br><span class="line">        delay();				<span class="comment">//IIC要求必须延时4.7us以上以确定数据</span></span><br><span class="line">        SCL = <span class="number">0</span>;				<span class="comment">//便于传输下一位数据</span></span><br><span class="line">        delay();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    SDA = <span class="number">1</span>;					<span class="comment">//拉高SDA以检测从机是否应答</span></span><br><span class="line">    SCL = <span class="number">1</span>;					<span class="comment">//稳定SDA</span></span><br><span class="line">    delay();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (SDA)					<span class="comment">//非应答   如果应答的话从机会把SDA的值拉低</span></span><br><span class="line">    &#123;</span><br><span class="line">        index++;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (index &gt; <span class="number">200</span>)</span><br><span class="line">        &#123;</span><br><span class="line">        	SCL = <span class="number">0</span>;		</span><br><span class="line">        	delay();</span><br><span class="line">        	<span class="keyword">return</span>;   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    SCL = <span class="number">0</span>;</span><br><span class="line">    delay();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接收数据"><a class="anchor" href="#接收数据">#</a> 接收数据</h2><p>接收数据和发送一样 只不过把发送数据的过程反过来了</p><h3 id="代码如下-3"><a class="anchor" href="#代码如下-3">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">iicReadData</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> dat;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        SCL = <span class="number">1</span>;</span><br><span class="line">        delay();</span><br><span class="line">        dat &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        dat |= SDA;</span><br><span class="line">        delay();</span><br><span class="line">        SCL = <span class="number">0</span>;</span><br><span class="line">        delay();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    SDA = <span class="number">0</span>;			<span class="comment">/*停止信号*/</span></span><br><span class="line">    delay();			<span class="comment">/*		*/</span></span><br><span class="line">    SCL = <span class="number">1</span>;			<span class="comment">/*		*/</span></span><br><span class="line">    delay();			<span class="comment">/*		*/</span></span><br><span class="line">    SDA = <span class="number">1</span>;			<span class="comment">/*		*/</span></span><br><span class="line">    delay();			<span class="comment">/*		*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="停止信号"><a class="anchor" href="#停止信号">#</a> 停止信号</h2><p>IIC 停止信号：当 SCL 处于低电平 (1) 时 (时长大于 4us) SDA 由低电平变为高电平 并保持至少 4.7us 则将其视为停止信号</p><img data-src="https://cdn.jsdelivr.net/gh/Wongbuer/typora/static/20210305180832.png" alt="QQ截图20210305180827" style="zoom:67%"><h3 id="代码如下-4"><a class="anchor" href="#代码如下-4">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">iicStop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    SDA = <span class="number">0</span>;</span><br><span class="line">    delay();</span><br><span class="line">    SCL = <span class="number">1</span>;</span><br><span class="line">    delay();</span><br><span class="line">    SDA = <span class="number">1</span>;</span><br><span class="line">    delay();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="写入数据"><a class="anchor" href="#写入数据">#</a> 写入数据</h2><p>单片机的 EEPROM 是 at24c02 芯片</p><p>写入需要几个要素：从机地址 写入的地址 写入的数据</p><h3 id="代码如下-5"><a class="anchor" href="#代码如下-5">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">at24c02Write</span><span class="params">(<span class="type">char</span> addr,<span class="type">char</span> dat)</span></span><br><span class="line">&#123;</span><br><span class="line">    iicStart();					<span class="comment">//开始传输</span></span><br><span class="line">    iicSendData(<span class="number">0xa0</span> + <span class="number">0</span>);		<span class="comment">//从机地址 + 0(主机写从机读)</span></span><br><span class="line">    iicSendData(addr);			<span class="comment">//选择写入的地址</span></span><br><span class="line">    iicSendData(dat);			<span class="comment">//写入数据</span></span><br><span class="line">    iicStop();					<span class="comment">//停止传输</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="读取数据"><a class="anchor" href="#读取数据">#</a> 读取数据</h2><p>读取数据看的几点是 谁发送 谁接受 数据在哪个地址</p><h3 id="代码如下-6"><a class="anchor" href="#代码如下-6">#</a> 代码如下</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> <span class="title function_">at24c02Read</span><span class="params">(<span class="type">char</span> addr)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> dat;</span><br><span class="line">    iicStart();</span><br><span class="line">    iicSendData(<span class="number">0xa0</span> + <span class="number">0</span>);</span><br><span class="line">    iicSendData(addr);</span><br><span class="line">    iicStart();</span><br><span class="line">    iicSendData(<span class="number">0xa0</span> + <span class="number">1</span>);</span><br><span class="line">    dat = iicReadData();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> dat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="整个工程"><a class="anchor" href="#整个工程">#</a> 整个工程</h2><p>代码如下</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;reg52.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> uchar unsigned char</span></span><br><span class="line"></span><br><span class="line">sbit dula = P2^<span class="number">6</span>;</span><br><span class="line">sbit wela = P2^<span class="number">7</span>;</span><br><span class="line">sbit SDA = P2^<span class="number">0</span>;</span><br><span class="line">sbit SCL = P2^<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> code table[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;</span><br><span class="line"><span class="type">char</span> code location[] = &#123;<span class="number">0x7f</span>,<span class="number">0xbf</span>,<span class="number">0xdf</span>,<span class="number">0xef</span>,<span class="number">0xf7</span>,<span class="number">0xfb</span>,<span class="number">0xfd</span>,<span class="number">0xfe</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">dis_delay</span><span class="params">(<span class="type">int</span> z)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> x,y;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (x = <span class="number">114</span>; x; x--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (y = z; y; y--);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	_nop_();</span><br><span class="line">	_nop_();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">iicStart</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	SDA = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SDA = <span class="number">0</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">0</span>;</span><br><span class="line">	delay();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">iicStop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	SDA = <span class="number">0</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SDA = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">iicSendData</span><span class="params">(uchar dat)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i,index;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		SDA = dat&gt;&gt; <span class="number">7</span>;</span><br><span class="line">		dat &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">		SCL = <span class="number">1</span>;</span><br><span class="line">		delay();</span><br><span class="line">		SCL = <span class="number">0</span>;</span><br><span class="line">		delay();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	SDA = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (SDA)</span><br><span class="line">	&#123;</span><br><span class="line">		index++;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (index &gt; <span class="number">200</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			SCL = <span class="number">0</span>;</span><br><span class="line">			delay();</span><br><span class="line">			<span class="comment">//P1 = 0;</span></span><br><span class="line">			<span class="keyword">return</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	SCL = <span class="number">0</span>;</span><br><span class="line">	delay();</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uchar <span class="title function_">iicReadData</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	uchar dat;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		SCL = <span class="number">1</span>;</span><br><span class="line">		delay();</span><br><span class="line">		dat &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">		dat |= SDA;</span><br><span class="line">		delay();</span><br><span class="line">		SCL = <span class="number">0</span>;</span><br><span class="line">		delay();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	SDA = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">1</span>;</span><br><span class="line">	delay();</span><br><span class="line">	SCL = <span class="number">0</span>;</span><br><span class="line">	delay();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> dat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">at24c02Write</span><span class="params">(uchar addr,uchar dat)</span></span><br><span class="line">&#123;</span><br><span class="line">	iicStart();</span><br><span class="line">	iicSendData(<span class="number">0x90</span> + <span class="number">0</span>);</span><br><span class="line">	iicSendData(addr);</span><br><span class="line">	iicSendData(dat);</span><br><span class="line">	iicStop();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uchar <span class="title function_">at24c02Read</span><span class="params">(uchar addr)</span></span><br><span class="line">&#123;</span><br><span class="line">	uchar dat;</span><br><span class="line">	iicStart();</span><br><span class="line">	iicSendData(<span class="number">0x90</span> + <span class="number">0</span>);</span><br><span class="line">	iicSendData(addr);</span><br><span class="line">	iicStart();</span><br><span class="line">	iicSendData(<span class="number">0x90</span> + <span class="number">1</span>);</span><br><span class="line">	dat = iicReadData();</span><br><span class="line">	iicStop();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> dat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">display</span><span class="params">(<span class="type">int</span> num)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> i,j;</span><br><span class="line">	<span class="type">int</span> temp,a[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (num &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>, temp = num; temp; i++, temp /= <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i] = temp % <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            P0 = <span class="number">0xff</span>;</span><br><span class="line">            wela = <span class="number">1</span>;</span><br><span class="line">            P0 = location[j];</span><br><span class="line">            wela = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            P0 = <span class="number">0</span>;</span><br><span class="line">            dula = <span class="number">1</span>;</span><br><span class="line">            P0 = table[a[j]];</span><br><span class="line">            dis_delay(<span class="number">0</span>);</span><br><span class="line">            dula = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>, temp = num; temp; i++, temp /= <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a[i] = temp % <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt;= i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            P0 = <span class="number">0xff</span>;</span><br><span class="line">            wela = <span class="number">1</span>;</span><br><span class="line">            P0 = location[j];</span><br><span class="line">            wela = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (j == i)</span><br><span class="line">            &#123;</span><br><span class="line">                P0 = <span class="number">0</span>;</span><br><span class="line">                dula = <span class="number">1</span>;</span><br><span class="line">                P0 = <span class="number">0x40</span>;</span><br><span class="line">                dis_delay(<span class="number">0</span>); </span><br><span class="line">                dula = <span class="number">0</span>;  </span><br><span class="line">            &#125;</span><br><span class="line">            P0 = <span class="number">0</span>;</span><br><span class="line">            dula = <span class="number">1</span>;</span><br><span class="line">            P0 = table[a[j]];</span><br><span class="line">            dis_delay(<span class="number">0</span>);</span><br><span class="line">            dula = <span class="number">0</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            P0 = <span class="number">0xff</span>;</span><br><span class="line">            wela = <span class="number">1</span>;</span><br><span class="line">            P0 = location[<span class="number">0</span>];</span><br><span class="line">            wela = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            P0 = <span class="number">0</span>;</span><br><span class="line">            dula = <span class="number">1</span>;</span><br><span class="line">            P0 = table[<span class="number">0</span>];</span><br><span class="line">            dis_delay(<span class="number">0</span>);</span><br><span class="line">            dula = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	uchar num;</span><br><span class="line"></span><br><span class="line">	at24c02Write(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">	dis_delay(<span class="number">5</span>);</span><br><span class="line">	num = at24c02Read(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		display(num);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="这里面的大坑"><a class="anchor" href="#这里面的大坑">#</a> 这里面的大坑</h2><p>IIC 里面有个大坑 我被带到坑里去整整一天才反应过来</p><p>当时所有的变量都用的是 char 类型 写出来的时候没有什么问题 因为简单调试也只是试试 100 一下的数字 可是当我想利用定时器自动增加写到 EEPROM 里面去的时候 到 128 就出现问题了 一开始以为是自己程序的问题 就一直检查显示函数 IIC 协议有没有写对 但是一直没有发现问题 (因为自己根据原来的程序改了一下 只向 EEPROM 里面读取数据 但是始终都是可以读出来的) 之后 我想到了可以借助 LED 来帮助调试　　可以把走 IIC 读出来的数用 LED 表示出来 再观察 LED 的亮灭写出对应二进制码　就可以知道 IIC 的数字了（串口通讯来调试也可以　但是当时懒得再写那些东西了　相比之下 LED 更加容易写）</p><p>但是又出现了一个问题　8 颗 LED 最多能显示的数字就是 128 (准确的说是 127 因为 128 的时候灯一颗都不亮) 不过想到可以通过减去已知的数字来显示 (比如 IIC 走的 129 LED 显示不出来 那我可以让 LED 显示 IIC 减去 2 之后的值 如果正确的话那也就没问题了) 不过也正是因为这个想法 弄得我越走越偏</p><p>用 LED 调试的时候 不论发送什么值 做了相应的减法之后都可以正确的显示 这就很奇怪了 所以我又把焦点投向了显示函数 知道最后我才发现 是 char 变量取值范围的问题 (char 类型变量范围为 - 128 至 + 127) 将所有的类型转变为 unsigned char 之后 什么问题都没有了 : )</p><p>(怪不得调试的时候把 128 显示成 - 1😂)</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-03-23 22:48:21" itemprop="dateModified" datetime="2024-03-23T22:48:21+08:00">2024-03-23</time> </span><span id="嵌入式/IIC通讯协议/" class="item leancloud_visitors" data-flag-title="IIC 通讯协议" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>王不二 <i class="ic i-at"><em>@</em></i>王不二的書架</li><li class="link"><strong>本文链接：</strong> <a href="https://wongbuer.github.io/%E5%B5%8C%E5%85%A5%E5%BC%8F/IIC%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE/" title="IIC 通讯协议">https://wongbuer.github.io/嵌入式/IIC通讯协议/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/" itemprop="url" rel="prev" data-background-image="&#x2F;assets&#x2F;5.webp" title="串口通讯"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 嵌入式</span><h3>串口通讯</h3></a></div><div class="item right"><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E8%9C%82%E9%B8%A3%E5%99%A8/" itemprop="url" rel="next" data-background-image="&#x2F;assets&#x2F;10.webp" title="蜂鸣器"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 嵌入式</span><h3>蜂鸣器</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#iic%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.</span> <span class="toc-text">IIC 通讯协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#iic%E4%BC%A0%E8%BE%93%E8%A7%84%E5%88%99"><span class="toc-number">1.2.</span> <span class="toc-text">IIC 传输规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.3.</span> <span class="toc-text">开始信号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.</span> <span class="toc-text">发送数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B-2"><span class="toc-number">1.4.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.</span> <span class="toc-text">接收数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B-3"><span class="toc-number">1.5.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E4%BF%A1%E5%8F%B7"><span class="toc-number">1.6.</span> <span class="toc-text">停止信号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B-4"><span class="toc-number">1.6.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.</span> <span class="toc-text">写入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B-5"><span class="toc-number">1.7.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">1.8.</span> <span class="toc-text">读取数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B-6"><span class="toc-number">1.8.1.</span> <span class="toc-text">代码如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%B8%AA%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.9.</span> <span class="toc-text">整个工程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E9%9D%A2%E7%9A%84%E5%A4%A7%E5%9D%91"><span class="toc-number">1.10.</span> <span class="toc-text">这里面的大坑</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/GPIO/" rel="bookmark" title="GPIO">GPIO</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/STM32%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="bookmark" title="STM32学习计划">STM32学习计划</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/%E4%BD%8D%E5%B8%A6%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98/" rel="bookmark" title="位带操作问题">位带操作问题</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/%E5%BA%93%E5%87%BD%E6%95%B0%E7%BC%96%E7%A8%8B%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/" rel="bookmark" title="库函数编程准备工作">库函数编程准备工作</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/%E6%9C%89%E5%85%B3STM32%E4%B8%AD%E6%97%A0%E6%B3%95%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88%E7%9A%84%E9%97%AE%E9%A2%98/" rel="bookmark" title="有关STM32中无法直接使用结构体指针的问题">有关STM32中无法直接使用结构体指针的问题</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%AE%A3%E8%AE%B2%E4%BC%9A/%E5%AE%A3%E8%AE%B2%E4%BC%9A/" rel="bookmark" title="宣讲会">宣讲会</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AF%92%E5%81%87%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AF%92%E5%81%87%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/" rel="bookmark" title="嵌入式寒假学习计划">嵌入式寒假学习计划</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/DHT11%E6%A8%A1%E5%9D%97/" rel="bookmark" title="DHT11模块">DHT11模块</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/DS1302%E6%95%B0%E7%A0%81%E7%AE%A1%E8%AE%A1%E6%97%B6/" rel="bookmark" title="DS1302数码管计时">DS1302数码管计时</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/(SPI%E5%8D%8F%E8%AE%AE)ADDA%E2%80%94%E2%80%94XPT2046/" rel="bookmark" title="(SPI协议)ADDA——XPT2046">(SPI协议)ADDA——XPT2046</a></li><li class="active"><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/IIC%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE/" rel="bookmark" title="IIC通讯协议">IIC通讯协议</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/" rel="bookmark" title="串口通讯">串口通讯</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%BA%AE%E7%81%AF/" rel="bookmark" title="亮灯">亮灯</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E5%9C%A8vs%E4%B8%8A%E8%90%A5%E9%80%A051%E5%8D%95%E7%89%87%E6%9C%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" rel="bookmark" title="在vs上营造51单片机开发环境">在vs上营造51单片机开发环境</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E6%8C%89%E9%94%AE%E8%AE%A1%E6%95%B0%E5%99%A8/" rel="bookmark" title="按键计数器">按键计数器</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E6%95%B0%E7%A0%81%E7%AE%A1%E7%BC%96%E7%A0%81%E8%A1%A8/" rel="bookmark" title="数码管编码表">数码管编码表</a></li><li><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E8%9C%82%E9%B8%A3%E5%99%A8/" rel="bookmark" title="蜂鸣器">蜂鸣器</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="王不二" data-src="/images/avatar.jpg"><p class="name" itemprop="name">王不二</p><div class="description" itemprop="description">王不二的网络博客</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">224</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">19</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">72</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1dvbmdidWVy" title="https:&#x2F;&#x2F;github.com&#x2F;Wongbuer"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQ0NDY3MzQ2MQ==" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;444673461"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOndvbmdidWVyQG91dGxvb2suY29t" title="mailto:wongbuer@outlook.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E4%B8%B2%E5%8F%A3%E9%80%9A%E8%AE%AF/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E8%9C%82%E9%B8%A3%E5%99%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/java-language/" title="分类于 Java">Java</a></div><span><a href="/Java/Basic/01Junit/" title="JUnit使用">JUnit使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/JavaScript/WebAPI%E9%83%A8%E5%88%86/03BOM/" title="BOM">BOM</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/NodeJs/" title="分类于 NodeJs">NodeJs</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/Node/express/" title="express">express</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/CSS/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AD%A6%E4%B9%A0(pink%E7%89%88)/vertical-align%E5%B1%9E%E6%80%A7%E5%BA%94%E7%94%A8/" title="vertical-align属性应用">vertical-align属性应用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%AD%A6%E4%B9%A0/" title="分类于 学习">学习</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/CSS/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AD%A6%E4%B9%A0(pink%E7%89%88)/less/" title="less">less</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/redis/" title="分类于 Redis">Redis</a></div><span><a href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/NoSQL/Redis/new/03Redis%E6%8C%81%E4%B9%85%E5%8C%96/" title="03Redis持久化">03Redis持久化</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/HTML/" title="分类于 HTML">HTML</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/HTML/06%E9%9F%B3%E9%A2%91%E6%A0%87%E7%AD%BE/" title="音频标签">音频标签</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/HTML/" title="分类于 HTML">HTML</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/HTML/02%E6%A0%87%E9%A2%98%E5%92%8C%E6%AE%B5%E8%90%BD/" title="标题和段落">标题和段落</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/JavaScript/" title="分类于 JavaScript">JavaScript</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/JavaScript/JavaScript%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E5%AD%A6%E4%B9%A0/location%E5%AF%B9%E8%B1%A1/" title="location对象">location对象</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/HTML/" title="分类于 HTML">HTML</a></div><span><a href="/web%E5%89%8D%E7%AB%AF/HTML/11%E8%A1%A8%E5%8D%95%E6%A0%87%E7%AD%BE/" title="表单标签">表单标签</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">王不二 @ Wongbuer's Shoka</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"嵌入式/IIC通讯协议/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>